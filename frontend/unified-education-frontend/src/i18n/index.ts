import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const resources = {
  en: {
    translation: {
      'auth.welcome': 'Waaed Education Platform',
      'navigation.main': 'Main',
      'navigation.academic': 'Academic',
      'navigation.management': 'Management',
      'navigation.system': 'System',
      'navigation.sis': 'Student Information System',
      'navigation.lms': 'Learning Management',
      'navigation.erp': 'Enterprise Resource Planning',
      'navigation.exams': 'Examinations',
      'navigation.analytics': 'Analytics',
      'navigation.admin': 'Administration',
      'navigation.ai': 'AI Services',
      'navigation.bpm': 'Business Process Management',
      'common.loading': 'Loading...',
      'common.dashboard': 'Dashboard',
      'common.clickToView': 'Click to view',
      'common.currentDate': 'Current Date',
      'common.currentTime': 'Current Time',
      'common.systemStatus': 'System Status',
      'common.operational': 'Operational',
      'common.toggleMenu': 'Toggle Menu',
      'common.searchPlaceholder': 'Search...',
      'common.notifications': 'Notifications',
      'common.viewAllNotifications': 'View All Notifications',
      'common.toggleTheme': 'Toggle Theme',
      'common.userMenu': 'User Menu',
      'common.profile': 'Profile',
      'common.settings': 'Settings',
      'common.help': 'Help',
      'common.logout': 'Logout',
      'navigation.modules': 'Platform Modules',
      'navigation.selectModule': 'Select a module to get started',
      'dashboard.overview': 'Overview',
      'dashboard.systemInfo': 'System Information',
      'dashboard.totalStudents': 'Total Students',
      'dashboard.activeCourses': 'Active Courses',
      'dashboard.totalEmployees': 'Total Employees',
      'dashboard.attendanceRate': 'Attendance Rate',
      'sis.students': 'Students',
      'sis.studentManagement': 'Student Management',
      'sis.studentName': 'Student Name',
      'sis.email': 'Email',
      'sis.grade': 'Grade',
      'sis.status': 'Status',
      'lms.courses': 'Courses',
      'lms.courseManagement': 'Course Management',
      'lms.courseTitle': 'Course Title',
      'lms.instructor': 'Instructor',
      'lms.startDate': 'Start Date',
      'erp.employees': 'Employees',
      'erp.employeeManagement': 'Employee Management',
      'erp.employeeName': 'Employee Name',
      'erp.department': 'Department',
      'exams.examManagement': 'Exam Management',
      'exams.examTitle': 'Exam Title',
      'exams.subject': 'Subject',
      'exams.duration': 'Duration',
      'analytics.analyticsManagement': 'Analytics Management',
      'admin.adminManagement': 'Admin Management',
      'admin.tenantName': 'Tenant Name',
      'admin.domain': 'Domain',
      'admin.plan': 'Plan',
      'ai.aiManagement': 'AI Management',
      'bpm.workflowManagement': 'Workflow Management',
      'common.actions': 'Actions',
      'common.view': 'View',
      'common.edit': 'Edit',
      'common.delete': 'Delete',
      'common.export': 'Export',
      'common.retry': 'Retry',
      'common.error': 'Error',
      'common.more': 'More',
      'common.selectLanguage': 'Select Language',
      'common.errorLoadingData': 'Error loading data',
      'common.tryAgain': 'Try Again',
      'common.clickToExplore': 'Click to explore',
      'common.openModule': 'Open Module',
      'dashboard.welcomeMessage': 'Welcome to your unified education platform',
      'dashboard.keyMetrics': 'Key performance metrics and insights',
      'dashboard.studentsGrowth': 'Student enrollment growth this month',
      'dashboard.coursesActive': 'Currently active courses',
      'dashboard.staffMembers': 'Total staff members',
      'dashboard.attendanceImprovement': 'Attendance rate improvement',
      'dashboard.systemStatus': 'System Status',
      'dashboard.systemHealth': 'Real-time system health monitoring',
      'dashboard.academicCalendar': 'Academic calendar information',
      'dashboard.systemTime': 'Current system time',
      'dashboard.allSystemsRunning': 'All systems operational',
      'navigation.selectModuleDescription': 'Choose a module to access its features and functionality',
      'sis.description': 'Comprehensive student information and academic records management',
      'lms.description': 'Course creation, content delivery, and learning management tools',
      'erp.description': 'Human resources, payroll, and enterprise resource planning',
      'exams.description': 'Examination creation, administration, and psychometric analysis',
      'bpm.description': 'Business process automation and workflow management',
      'analytics.description': 'Advanced reporting, dashboards, and predictive analytics',
      'ai.description': 'AI-powered tutoring, content generation, and intelligent assistance',
      'admin.description': 'Multi-tenant administration, user management, and system configuration',
      'sis.manageStudentRecords': 'Manage student records and information',
      'sis.addStudent': 'Add Student',
      'sis.studentList': 'Student List',
      'sis.searchStudents': 'Search students...',
      'sis.allGrades': 'All Grades',
      'sis.noStudentsMatchFilter': 'No students match the current filter',
      'sis.noStudentsYet': 'No students have been added yet',
      'sis.addFirstStudent': 'Add First Student',
      'sis.quickStats': 'Quick Statistics',
      'sis.totalStudents': 'Total Students',
      'sis.activeStudents': 'Active Students',
      'sis.totalGrades': 'Total Grades',
      'sis.activeRate': 'Active Rate',
      'lms.manageCourseContent': 'Manage courses and learning content',
      'lms.createCourse': 'Create Course',
      'lms.courseOverview': 'Course Overview',
      'lms.totalCourses': 'Total Courses',
      'lms.publishedCourses': 'Published Courses',
      'lms.draftCourses': 'Draft Courses',
      'lms.archivedCourses': 'Archived Courses',
      'lms.courseList': 'Course List',
      'lms.searchCourses': 'Search courses...',
      'lms.allStatuses': 'All Statuses',
      'lms.published': 'Published',
      'lms.draft': 'Draft',
      'lms.archived': 'Archived',
      'lms.noCoursesMatchFilter': 'No courses match the current filter',
      'lms.noCoursesYet': 'No courses have been created yet',
      'lms.createFirstCourse': 'Create First Course',
      'erp.manageStaffRecords': 'Manage employee records and HR information',
      'erp.addEmployee': 'Add Employee',
      'erp.payrollReport': 'Payroll Report',
      'erp.employeeOverview': 'Employee Overview',
      'erp.totalEmployees': 'Total Employees',
      'erp.activeEmployees': 'Active Employees',
      'erp.departments': 'Departments',
      'erp.monthlyPayroll': 'Monthly Payroll',
      'erp.employeeList': 'Employee List',
      'erp.searchEmployees': 'Search employees...',
      'erp.allDepartments': 'All Departments',
      'erp.position': 'Position',
      'erp.status': 'Status',
      'erp.payroll': 'Payroll',
      'erp.noEmployeesMatchFilter': 'No employees match the current filter',
      'erp.noEmployeesYet': 'No employees have been added yet',
      'erp.addFirstEmployee': 'Add First Employee',
      'erp.departmentBreakdown': 'Department Breakdown',
      'erp.employeesCount': 'employees',
      'theme.switchLanguage': 'Switch Language',
      'theme.darkMode': 'Dark Mode',
      'theme.lightMode': 'Light Mode',
      'theme.loading': 'Loading...',
      'theme.noData': 'No data available',
      'theme.refresh': 'Refresh',
      'theme.close': 'Close',
      'theme.save': 'Save',
      'theme.cancel': 'Cancel',
      'theme.confirm': 'Confirm',
      'theme.success': 'Success',
      'theme.warning': 'Warning',
      'theme.error': 'Error',
      'theme.info': 'Information',
      'navigation.home': 'Home',
      'navigation.students': 'Students',
      'navigation.courses': 'Courses',
      'navigation.assignments': 'Assignments',
      'navigation.grades': 'Grades',
      'navigation.attendance': 'Attendance',
      'navigation.reports': 'Reports',
      'navigation.finance': 'Finance',
      'navigation.hr': 'Human Resources',
      'navigation.library': 'Library',
      'navigation.inventory': 'Inventory',
      'navigation.polls': 'Polls',
      'navigation.blogs': 'Blogs',
      'navigation.tasks': 'Tasks',
      'navigation.calendar': 'Calendar',
      'navigation.messages': 'Messages',
      'navigation.users': 'Users',
      'navigation.roles': 'Roles',
      'navigation.permissions': 'Permissions',
      'navigation.configuration': 'Configuration',
      'navigation.backup': 'Backup',
      'navigation.logs': 'Logs',
      'navigation.monitoring': 'Monitoring',
      'roles.admin': 'Administrator',
      'roles.teacher': 'Teacher',
      'roles.student': 'Student',
      'roles.parent': 'Parent',
      'roles.staff': 'Staff',
      'roles.manager': 'Manager',
      'roles.principal': 'Principal',
      'roles.librarian': 'Librarian',
      'roles.accountant': 'Accountant',
      'roles.hr': 'HR Manager',
      'notifications.newEnrollment': 'New Student Enrollment',
      'notifications.enrollmentMessage': 'A new student has been enrolled in the system',
      'notifications.assignmentDue': 'Assignment Due',
      'notifications.assignmentMessage': 'You have an assignment due soon',
      'notifications.systemUpdate': 'System Update',
      'notifications.maintenanceMessage': 'System maintenance is scheduled',
      'notifications.markAllRead': 'Mark All as Read',
      'time.minutesAgo': '{{count}} minute ago',
      'time.minutesAgo_plural': '{{count}} minutes ago',
      'time.hoursAgo': '{{count}} hour ago',
      'time.hoursAgo_plural': '{{count}} hours ago',
      'time.daysAgo': '{{count}} day ago',
      'time.daysAgo_plural': '{{count}} days ago',
      'common.search': 'Search',
      'common.changeLanguage': 'Change Language',
      'common.menu': 'Menu',
      'auth.logout': 'Sign Out',
      'dashboard.quickActions': 'Quick Actions',
      'dashboard.recentActivity': 'Recent Activity',
      'dashboard.upcomingEvents': 'Upcoming Events',
      'dashboard.statistics': 'Statistics',
      'dashboard.announcements': 'Announcements'
    }
  },
  ar: {
    translation: {
      'auth.welcome': 'منصة وعد التعليمية',
      'navigation.main': 'الرئيسية',
      'navigation.academic': 'الأكاديمية',
      'navigation.management': 'الإدارة',
      'navigation.system': 'النظام',
      'navigation.sis': 'نظام معلومات الطلاب',
      'navigation.lms': 'إدارة التعلم',
      'navigation.erp': 'تخطيط موارد المؤسسة',
      'navigation.exams': 'الامتحانات',
      'navigation.analytics': 'التحليلات',
      'navigation.admin': 'الإدارة',
      'navigation.ai': 'خدمات الذكاء الاصطناعي',
      'navigation.bpm': 'إدارة العمليات التجارية',
      'common.loading': 'جاري التحميل...',
      'common.dashboard': 'لوحة التحكم',
      'common.clickToView': 'انقر للعرض',
      'common.currentDate': 'التاريخ الحالي',
      'common.currentTime': 'الوقت الحالي',
      'common.systemStatus': 'حالة النظام',
      'common.operational': 'يعمل',
      'common.toggleMenu': 'تبديل القائمة',
      'common.searchPlaceholder': 'بحث...',
      'common.notifications': 'الإشعارات',
      'common.viewAllNotifications': 'عرض جميع الإشعارات',
      'common.toggleTheme': 'تبديل المظهر',
      'common.userMenu': 'قائمة المستخدم',
      'common.profile': 'الملف الشخصي',
      'common.settings': 'الإعدادات',
      'common.help': 'المساعدة',
      'common.logout': 'تسجيل الخروج',
      'navigation.modules': 'وحدات المنصة',
      'navigation.selectModule': 'اختر وحدة للبدء',
      'dashboard.overview': 'نظرة عامة',
      'dashboard.systemInfo': 'معلومات النظام',
      'dashboard.totalStudents': 'إجمالي الطلاب',
      'dashboard.activeCourses': 'الدورات النشطة',
      'dashboard.totalEmployees': 'إجمالي الموظفين',
      'dashboard.attendanceRate': 'معدل الحضور',
      'sis.students': 'الطلاب',
      'sis.studentManagement': 'إدارة الطلاب',
      'sis.studentName': 'اسم الطالب',
      'sis.email': 'البريد الإلكتروني',
      'sis.grade': 'الصف',
      'sis.status': 'الحالة',
      'lms.courses': 'الدورات',
      'lms.courseManagement': 'إدارة الدورات',
      'lms.courseTitle': 'عنوان الدورة',
      'lms.instructor': 'المدرس',
      'lms.startDate': 'تاريخ البداية',
      'erp.employees': 'الموظفون',
      'erp.employeeManagement': 'إدارة الموظفين',
      'erp.employeeName': 'اسم الموظف',
      'erp.department': 'القسم',
      'exams.examManagement': 'إدارة الامتحانات',
      'exams.examTitle': 'عنوان الامتحان',
      'exams.subject': 'المادة',
      'exams.duration': 'المدة',
      'analytics.analyticsManagement': 'إدارة التحليلات',
      'admin.adminManagement': 'إدارة النظام',
      'admin.tenantName': 'اسم المستأجر',
      'admin.domain': 'النطاق',
      'admin.plan': 'الخطة',
      'ai.aiManagement': 'إدارة الذكاء الاصطناعي',
      'bpm.workflowManagement': 'إدارة سير العمل',
      'common.actions': 'الإجراءات',
      'common.view': 'عرض',
      'common.edit': 'تعديل',
      'common.delete': 'حذف',
      'common.export': 'تصدير',
      'common.retry': 'إعادة المحاولة',
      'common.error': 'خطأ',
      'common.more': 'المزيد',
      'common.selectLanguage': 'اختر اللغة',
      'common.errorLoadingData': 'خطأ في تحميل البيانات',
      'common.tryAgain': 'حاول مرة أخرى',
      'common.clickToExplore': 'انقر للاستكشاف',
      'common.openModule': 'فتح الوحدة',
      'dashboard.welcomeMessage': 'مرحباً بك في منصة التعليم الموحدة',
      'dashboard.keyMetrics': 'المقاييس الرئيسية والرؤى',
      'dashboard.studentsGrowth': 'نمو تسجيل الطلاب هذا الشهر',
      'dashboard.coursesActive': 'الدورات النشطة حالياً',
      'dashboard.staffMembers': 'إجمالي أعضاء الطاقم',
      'dashboard.attendanceImprovement': 'تحسن معدل الحضور',
      'dashboard.systemStatus': 'حالة النظام',
      'dashboard.systemHealth': 'مراقبة صحة النظام في الوقت الفعلي',
      'dashboard.academicCalendar': 'معلومات التقويم الأكاديمي',
      'dashboard.systemTime': 'وقت النظام الحالي',
      'dashboard.allSystemsRunning': 'جميع الأنظمة تعمل',
      'navigation.selectModuleDescription': 'اختر وحدة للوصول إلى ميزاتها ووظائفها',
      'sis.description': 'إدارة شاملة لمعلومات الطلاب والسجلات الأكاديمية',
      'lms.description': 'إنشاء المقررات وتقديم المحتوى وأدوات إدارة التعلم',
      'erp.description': 'الموارد البشرية والرواتب وتخطيط موارد المؤسسة',
      'exams.description': 'إنشاء الامتحانات وإدارتها والتحليل النفسي القياسي',
      'bpm.description': 'أتمتة العمليات التجارية وإدارة سير العمل',
      'analytics.description': 'التقارير المتقدمة ولوحات المعلومات والتحليلات التنبؤية',
      'ai.description': 'التدريس المدعوم بالذكاء الاصطناعي وإنتاج المحتوى والمساعدة الذكية',
      'admin.description': 'إدارة متعددة المستأجرين وإدارة المستخدمين وتكوين النظام',
      'sis.manageStudentRecords': 'إدارة سجلات ومعلومات الطلاب',
      'sis.addStudent': 'إضافة طالب',
      'sis.studentList': 'قائمة الطلاب',
      'sis.searchStudents': 'البحث عن الطلاب...',
      'sis.allGrades': 'جميع الصفوف',
      'sis.noStudentsMatchFilter': 'لا يوجد طلاب يطابقون المرشح الحالي',
      'sis.noStudentsYet': 'لم يتم إضافة أي طلاب بعد',
      'sis.addFirstStudent': 'إضافة أول طالب',
      'sis.quickStats': 'إحصائيات سريعة',
      'sis.totalStudents': 'إجمالي الطلاب',
      'sis.activeStudents': 'الطلاب النشطون',
      'sis.totalGrades': 'إجمالي الصفوف',
      'sis.activeRate': 'معدل النشاط',
      'lms.manageCourseContent': 'إدارة الدورات ومحتوى التعلم',
      'lms.createCourse': 'إنشاء دورة',
      'lms.courseOverview': 'نظرة عامة على الدورات',
      'lms.totalCourses': 'إجمالي الدورات',
      'lms.publishedCourses': 'الدورات المنشورة',
      'lms.draftCourses': 'الدورات المسودة',
      'lms.archivedCourses': 'الدورات المؤرشفة',
      'lms.courseList': 'قائمة الدورات',
      'lms.searchCourses': 'البحث عن الدورات...',
      'lms.allStatuses': 'جميع الحالات',
      'lms.published': 'منشور',
      'lms.draft': 'مسودة',
      'lms.archived': 'مؤرشف',
      'lms.noCoursesMatchFilter': 'لا توجد دورات تطابق المرشح الحالي',
      'lms.noCoursesYet': 'لم يتم إنشاء أي دورات بعد',
      'lms.createFirstCourse': 'إنشاء أول دورة',
      'erp.manageStaffRecords': 'إدارة سجلات الموظفين ومعلومات الموارد البشرية',
      'erp.addEmployee': 'إضافة موظف',
      'erp.payrollReport': 'تقرير الرواتب',
      'erp.employeeOverview': 'نظرة عامة على الموظفين',
      'erp.totalEmployees': 'إجمالي الموظفين',
      'erp.activeEmployees': 'الموظفون النشطون',
      'erp.departments': 'الأقسام',
      'erp.monthlyPayroll': 'الراتب الشهري',
      'erp.employeeList': 'قائمة الموظفين',
      'erp.searchEmployees': 'البحث عن الموظفين...',
      'erp.allDepartments': 'جميع الأقسام',
      'erp.position': 'المنصب',
      'erp.status': 'الحالة',
      'erp.payroll': 'الراتب',
      'erp.noEmployeesMatchFilter': 'لا يوجد موظفون يطابقون المرشح الحالي',
      'erp.noEmployeesYet': 'لم يتم إضافة أي موظفين بعد',
      'erp.addFirstEmployee': 'إضافة أول موظف',
      'erp.departmentBreakdown': 'تفصيل الأقسام',
      'erp.employeesCount': 'موظفين',
      'theme.switchLanguage': 'تبديل اللغة',
      'theme.darkMode': 'الوضع المظلم',
      'theme.lightMode': 'الوضع المضيء',
      'theme.loading': 'جاري التحميل...',
      'theme.noData': 'لا توجد بيانات متاحة',
      'theme.refresh': 'تحديث',
      'theme.close': 'إغلاق',
      'theme.save': 'حفظ',
      'theme.cancel': 'إلغاء',
      'theme.confirm': 'تأكيد',
      'theme.success': 'نجح',
      'theme.warning': 'تحذير',
      'theme.error': 'خطأ',
      'theme.info': 'معلومات',
      'navigation.home': 'الرئيسية',
      'navigation.students': 'الطلاب',
      'navigation.courses': 'المقررات',
      'navigation.assignments': 'الواجبات',
      'navigation.grades': 'الدرجات',
      'navigation.attendance': 'الحضور',
      'navigation.reports': 'التقارير',
      'navigation.finance': 'المالية',
      'navigation.hr': 'الموارد البشرية',
      'navigation.library': 'المكتبة',
      'navigation.inventory': 'المخزون',
      'navigation.polls': 'الاستطلاعات',
      'navigation.blogs': 'المدونات',
      'navigation.tasks': 'المهام',
      'navigation.calendar': 'التقويم',
      'navigation.messages': 'الرسائل',
      'navigation.users': 'المستخدمون',
      'navigation.roles': 'الأدوار',
      'navigation.permissions': 'الصلاحيات',
      'navigation.configuration': 'الإعدادات',
      'navigation.backup': 'النسخ الاحتياطي',
      'navigation.logs': 'السجلات',
      'navigation.monitoring': 'المراقبة',
      'roles.admin': 'مدير النظام',
      'roles.teacher': 'معلم',
      'roles.student': 'طالب',
      'roles.parent': 'ولي أمر',
      'roles.staff': 'موظف',
      'roles.manager': 'مدير',
      'roles.principal': 'مدير المدرسة',
      'roles.librarian': 'أمين المكتبة',
      'roles.accountant': 'محاسب',
      'roles.hr': 'مدير الموارد البشرية',
      'notifications.newEnrollment': 'تسجيل طالب جديد',
      'notifications.enrollmentMessage': 'تم تسجيل طالب جديد في النظام',
      'notifications.assignmentDue': 'موعد تسليم واجب',
      'notifications.assignmentMessage': 'لديك واجب يجب تسليمه قريباً',
      'notifications.systemUpdate': 'تحديث النظام',
      'notifications.maintenanceMessage': 'تم جدولة صيانة النظام',
      'notifications.markAllRead': 'تحديد الكل كمقروء',
      'time.minutesAgo': 'منذ {{count}} دقيقة',
      'time.minutesAgo_plural': 'منذ {{count}} دقائق',
      'time.hoursAgo': 'منذ {{count}} ساعة',
      'time.hoursAgo_plural': 'منذ {{count}} ساعات',
      'time.daysAgo': 'منذ {{count}} يوم',
      'time.daysAgo_plural': 'منذ {{count}} أيام',
      'common.search': 'بحث',
      'common.changeLanguage': 'تغيير اللغة',
      'common.menu': 'القائمة',
      'auth.logout': 'تسجيل الخروج',
      'dashboard.quickActions': 'إجراءات سريعة',
      'dashboard.recentActivity': 'النشاط الأخير',
      'dashboard.upcomingEvents': 'الأحداث القادمة',
      'dashboard.statistics': 'الإحصائيات',
      'dashboard.announcements': 'الإعلانات'
    }
  }
};

i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: localStorage.getItem('language') || 'en',
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false
    },
    react: {
      useSuspense: false
    },
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag'],
      caches: ['localStorage']
    }
  });

const updateDocumentDirection = (language: string) => {
  const isRTL = language === 'ar';
  document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
  document.documentElement.lang = language;
  
  document.documentElement.style.setProperty('--text-align-start', isRTL ? 'right' : 'left');
  document.documentElement.style.setProperty('--text-align-end', isRTL ? 'left' : 'right');
  document.documentElement.style.setProperty('--margin-start', isRTL ? 'margin-right' : 'margin-left');
  document.documentElement.style.setProperty('--margin-end', isRTL ? 'margin-left' : 'margin-right');
  document.documentElement.style.setProperty('--padding-start', isRTL ? 'padding-right' : 'padding-left');
  document.documentElement.style.setProperty('--padding-end', isRTL ? 'padding-left' : 'padding-right');
  
  if (isRTL) {
    document.documentElement.style.setProperty('--font-family-primary', "'Effra Arabic', 'Noto Sans Arabic', 'Cairo', 'Tajawal', sans-serif");
  } else {
    document.documentElement.style.setProperty('--font-family-primary', "'Effra', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif");
  }
};

updateDocumentDirection(i18n.language);

i18n.on('languageChanged', (language: string) => {
  localStorage.setItem('language', language);
  updateDocumentDirection(language);
});

export const isRTL = () => i18n.language === 'ar';

export const getTextDirection = () => isRTL() ? 'rtl' : 'ltr';

export default i18n;
